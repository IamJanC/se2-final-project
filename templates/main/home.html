{% extends 'shared/base.html' %}
{% load static %}


{% block title %}Home{% endblock %}

{% block extra_head %}
  <!-- Homepage-specific styles only -->
  <link rel="stylesheet" href="{% static 'css/Homepage.css' %}" />

  <!-- Shared styles for layout components -->
  <link rel="stylesheet" href="{% static 'css/miniview.css' %}">
{% endblock %}


{% block content %}
<!-- === Main Starts Here ==== -->
<main class="page-main">

    <!-- === Carousel Section ==== -->
    <section class="carousel-section">
        <div class="carousel-container">
            <div class="carousel-slides">
                <div class="carousel-slide">
                    <img src="/static/images/Temporaries/Banner 1.png" alt="Banner 3">
                </div>
                <div class="carousel-slide">
                    <img src="/static/images/Temporaries/temp agri banner.jpg" alt="Banner 1">
                </div>
                <div class="carousel-slide">
                    <img src="/static/images/Temporaries/temp agri banner.jpg" alt="Banner 2">
                </div>
            </div>
            <button class="carousel-btn" id="prevBtn">&#10094;</button>
            <button class="carousel-btn" id="nextBtn">&#10095;</button>
            <div class="carousel-indicators">
                <div class="indicator active" data-index="0"></div>
                <div class="indicator" data-index="1"></div>
                <div class="indicator" data-index="2"></div>
            </div>
        </div>
    </section>

    <!-- === Product Section ==== -->
<!-- === Product Section ==== -->
<section class="container product-section">

  {% for category, products in products_by_category.items %}
  <div class="category-product-list" id="{{ category.slug }}">

    <div class="product-category-header">
      <h3>{{ category.name }}</h3>
      <a href="{% url 'main:shop' %}?category={{ category.slug }}">View All ></a>
    </div>

    <div class="products-list">
      {% if products %}
        {% for product in products %}
        <div class="product">
            <a href="{% url 'main:product_detail' product.id %}" class="product-card-link">
                <div class="product-img-wrap">
                  <img src="{{ product.image_url }}" alt="{{ product.name }}">
                </div>
                <div class="product-title">
                  <h3>{{ product.name }}</h3>
                </div>
                <div class="product-info-left">
                  <p class="price">â‚±{{ product.price }}</p>
                  <progress value="{{ product.stock }}" max="100"></progress>
                  <p class="stock">Stock: {{ product.stock }}</p>
                </div>
            </a>
            <button type="button"
                    class="add-to-cart-btn open-miniview-btn"
                    data-product-id="{{ product.id }}"
                    {% if product.stock == 0 %}disabled{% endif %}>
              Add to cart
            </button>
        </div>
        
        {% endfor %}
      {% else %}
        <p>No products available in this category.</p>
      {% endif %}
    </div>
  </div>
  {% endfor %}

</section>

</main>
<!-- === Main Ends Here ==== -->

<!-- === MODALS === -->
  <!--Product Miniview-->
  {% include 'shared/product_miniview_cart.html' %}
{% endblock %}
