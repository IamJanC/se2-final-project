{% extends 'shared/base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/product.css' %}">

<div class="product-container">
  <div class="product-image">
    <img src="{{ product.image_url }}" alt="{{ product.name }}">
  </div>

  <div class="product-details">
    <h2 class="product-name">{{ product.name }}</h2>
    <p class="product-price">₱{{ product.price }}</p>
    <p class="product-category">Category: {{ product.category }}</p>
    <p class="product-stock {% if product.stock > 0 %}in-stock{% else %}out-of-stock{% endif %}">
      {% if product.stock > 0 %}
        In stock: {{ product.stock }}
      {% else %}
        Out of Stock
      {% endif %}
    </p>
    <p class="product-description">{{ product.description }}</p>

    {% if product.stock > 0 %}
      <form method="post">
        {% csrf_token %}
        <button type="submit" class="add-cart-btn">Add to Cart</button>
      </form>
    {% else %}
      <button class="add-cart-btn" disabled>Out of Stock</button>
    {% endif %}
  </div>
</div>

{% if added_to_cart %}
<div id="cartModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <p>✅ {{ product.name }} has been added to your cart!</p>
  </div>
</div>
<script>
  function closeModal() {
    document.getElementById('cartModal').style.display = 'none';
  }

  // Open modal if product added
  window.onload = function () {
    document.getElementById('cartModal').style.display = 'block';
  };
</script>
{% endif %}

{% endblock %}
